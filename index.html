<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANOVA de Un Factor - UTEM</title>
    
    <!-- Librer√≠as Externas -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Highlight.js para resaltado de c√≥digo -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/r.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary-color: #c0392b;
            --secondary-color: #e74c3c;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --r-color: #276fbf;
            --python-color: #3776ab;
            --bg-gradient-1: #c0392b;
            --bg-gradient-2: #8e44ad;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* Header */
        header {
            text-align: center;
            color: white;
            padding: 40px 20px;
            margin-bottom: 30px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .header-logos {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .header-logos img {
            max-height: 80px;
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }
        
        header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .institucion {
            font-size: 1.1em;
            margin-top: 15px;
            font-weight: 600;
        }
        
        .departamento {
            font-size: 0.95em;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .tab-button {
            padding: 15px 25px;
            background: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .tab-button.active {
            background: linear-gradient(135deg, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 100%);
            color: white;
        }
        
        /* Content */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .card h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 10px;
        }
        
        .card h3 {
            color: var(--secondary-color);
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }
        
        .card h4 {
            color: var(--primary-color);
            margin-top: 15px;
            margin-bottom: 10px;
        }
        
        /* Boxes */
        .formula-box {
            background: linear-gradient(135deg, #c0392b15 0%, #8e44ad15 100%);
            border-left: 4px solid var(--secondary-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            overflow-x: auto;
        }
        
        .r-box {
            background: #e3f2fd;
            border-left: 4px solid var(--r-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .python-box {
            background: #e8f5e9;
            border-left: 4px solid var(--python-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .example-box {
            background: #fff3e0;
            border-left: 4px solid var(--warning-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .definition-box {
            background: #f3e5f5;
            border: 2px solid var(--primary-color);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        
        .result-box {
            background: #e8f5e9;
            border: 3px solid var(--success-color);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        /* Code blocks */
        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
        }
        
        pre code {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        table th {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        table tr:hover {
            background: #f5f5f5;
        }
        
        .anova-table th {
            background: var(--secondary-color);
        }
        
        /* Interactive */
        .interactive-section {
            background: #f8f9fa;
            border: 2px solid var(--accent-color);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .input-group {
            margin: 15px 0;
        }
        
        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--primary-color);
        }
        
        input[type="number"], input[type="text"], select, textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s;
            font-family: 'Courier New', monospace;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
        }
        
        .btn {
            background: var(--secondary-color);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
        }
        
        .btn:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(192, 57, 43, 0.3);
        }
        
        .btn-r {
            background: var(--r-color);
        }
        
        .btn-r:hover {
            background: #1f5a9f;
        }
        
        .btn-python {
            background: var(--python-color);
        }
        
        .btn-python:hover {
            background: #2d5d8a;
        }
        
        /* Chart */
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        /* Grid */
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        
        /* Badges */
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 3px;
        }
        
        .badge-r {
            background: var(--r-color);
            color: white;
        }
        
        .badge-python {
            background: var(--python-color);
            color: white;
        }
        
        .badge-balanced {
            background: var(--success-color);
            color: white;
        }
        
        .badge-unbalanced {
            background: var(--warning-color);
            color: white;
        }
        
        /* Lists */
        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        li {
            margin: 8px 0;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            header h1 {
                font-size: 2em;
            }
            
            .header-logos img {
                max-height: 60px;
            }
        }
        
        /* Utilities */
        .text-center {
            text-align: center;
        }
        
        .highlight-value {
            background: #ffeb3b;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .result-value {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary-color);
            text-align: center;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        /* Output */
        .output-box {
            background: #f5f5f5;
            border-left: 4px solid var(--success-color);
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-logos">
                <img src="logo_utem.png" alt="Logo UTEM">
            </div>
            <h1>üìä ANOVA de Un Factor</h1>
            <p>An√°lisis de Varianza - Dise√±os Balanceados y No Balanceados</p>
            <p class="institucion">Universidad Tecnol√≥gica Metropolitana</p>
            <p class="departamento">Departamento de Estad√≠stica y Econometr√≠a</p>
        </header>
        
        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'teoria')">üìö Teor√≠a</button>
            <button class="tab-button" onclick="openTab(event, 'balanceado')">‚öñÔ∏è Dise√±o Balanceado</button>
            <button class="tab-button" onclick="openTab(event, 'no-balanceado')">üìä Dise√±o No Balanceado</button>
            <button class="tab-button" onclick="openTab(event, 'calculadora')">üßÆ Calculadora ANOVA</button>
            <button class="tab-button" onclick="openTab(event, 'r-ejemplos')">üìò R</button>
            <button class="tab-button" onclick="openTab(event, 'python-ejemplos')">üêç Python</button>
            <button class="tab-button" onclick="openTab(event, 'interpretacion')">üí° Interpretaci√≥n</button>
        </div>
        
        <!-- Tab Contents -->
        <div id="teoria" class="tab-content active"></div>
        <div id="balanceado" class="tab-content"></div>
        <div id="no-balanceado" class="tab-content"></div>
        <div id="calculadora" class="tab-content"></div>
        <div id="r-ejemplos" class="tab-content"></div>
        <div id="python-ejemplos" class="tab-content"></div>
        <div id="interpretacion" class="tab-content"></div>
    </div>
    
    <!-- Scripts -->
    <script>
        // Tab navigation
        function openTab(evt, tabName) {
            const contents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < contents.length; i++) {
                contents[i].classList.remove('active');
            }
            
            const buttons = document.getElementsByClassName('tab-button');
            for (let i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove('active');
            }
            
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.classList.add('active');
            
            // Re-render MathJax
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise([document.getElementById(tabName)]);
            }
            
            // Re-highlight code
            if (typeof hljs !== 'undefined') {
                document.getElementById(tabName).querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            cargarContenidos();
            
            // Highlight code
            if (typeof hljs !== 'undefined') {
                hljs.highlightAll();
            }
            
            // Render math
            if (typeof MathJax !== 'undefined') {
                MathJax.typesetPromise();
            }
        });
    </script>
    
    <!-- Content scripts -->
    <script src="anova_contenidos.js"></script>
    <script src="anova_ejemplos_codigo.js"></script>
    
    <script>
        // ============================================================
        // CARGAR TODOS LOS CONTENIDOS
        // ============================================================
        
        function cargarContenidos() {
            cargarTeoria();
            cargarBalanceado();
            cargarNoBalanceado();
            cargarCalculadora();
            cargarREjemplos();
            cargarPythonEjemplos();
            cargarInterpretacion();
        }
        
        // ============================================================
        // TEOR√çA DE ANOVA
        // ============================================================
        
        function cargarTeoria() {
            document.getElementById('teoria').innerHTML = `
                <div class="card">
                    <h2>üìö Teor√≠a de ANOVA de Un Factor</h2>
                    
                    <h3>üéØ ¬øQu√© es ANOVA?</h3>
                    <div class="definition-box">
                        <h4>Definici√≥n: An√°lisis de Varianza (ANOVA)</h4>
                        <p><strong>ANOVA</strong> (Analysis of Variance) es una t√©cnica estad√≠stica para comparar las medias de <strong>tres o m√°s grupos</strong> simult√°neamente.</p>
                        <p><strong>Hip√≥tesis:</strong></p>
                        <ul>
                            <li>\\(H_0: \\mu_1 = \\mu_2 = \\mu_3 = ... = \\mu_k\\) (todas las medias son iguales)</li>
                            <li>\\(H_a:\\) Al menos una media es diferente</li>
                        </ul>
                    </div>
                    
                    <h3>üìä Modelo de ANOVA de Un Factor</h3>
                    <div class="formula-box">
                        <h4>Modelo Estad√≠stico:</h4>
                        <p>\\[y_{ij} = \\mu + \\tau_i + \\epsilon_{ij}\\]</p>
                        <p>Donde:</p>
                        <ul>
                            <li>\\(y_{ij}\\) = observaci√≥n \\(j\\) del grupo \\(i\\)</li>
                            <li>\\(\\mu\\) = media general</li>
                            <li>\\(\\tau_i\\) = efecto del tratamiento \\(i\\)</li>
                            <li>\\(\\epsilon_{ij} \\sim N(0, \\sigma^2)\\) = error aleatorio</li>
                            <li>\\(i = 1, 2, ..., k\\) (n√∫mero de grupos)</li>
                            <li>\\(j = 1, 2, ..., n_i\\) (observaciones en grupo \\(i\\))</li>
                        </ul>
                    </div>
                    
                    <h3>üìê Partici√≥n de la Variabilidad</h3>
                    <div class="formula-box">
                        <h4>Suma de Cuadrados Total (SST):</h4>
                        <p>\\[SST = \\sum_{i=1}^{k} \\sum_{j=1}^{n_i} (y_{ij} - \\bar{y}_{..})^2\\]</p>
                        
                        <h4>Descomposici√≥n:</h4>
                        <p>\\[SST = SSB + SSW\\]</p>
                        
                        <p><strong>Suma de Cuadrados Entre Grupos (SSB):</strong></p>
                        <p>\\[SSB = \\sum_{i=1}^{k} n_i (\\bar{y}_{i.} - \\bar{y}_{..})^2\\]</p>
                        <p>Mide la variabilidad <em>entre</em> las medias de los grupos</p>
                        
                        <p><strong>Suma de Cuadrados Dentro de Grupos (SSW):</strong></p>
                        <p>\\[SSW = \\sum_{i=1}^{k} \\sum_{j=1}^{n_i} (y_{ij} - \\bar{y}_{i.})^2\\]</p>
                        <p>Mide la variabilidad <em>dentro</em> de cada grupo</p>
                    </div>
                    
                    <h3>üìä Tabla ANOVA</h3>
                    <table class="anova-table">
                        <thead>
                            <tr>
                                <th>Fuente</th>
                                <th>Suma Cuadrados (SS)</th>
                                <th>Grados Libertad (df)</th>
                                <th>Cuadrado Medio (MS)</th>
                                <th>Estad√≠stico F</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Entre grupos</strong></td>
                                <td>SSB</td>
                                <td>k - 1</td>
                                <td>MSB = SSB/(k-1)</td>
                                <td rowspan="2">F = MSB/MSW</td>
                            </tr>
                            <tr>
                                <td><strong>Dentro grupos</strong></td>
                                <td>SSW</td>
                                <td>N - k</td>
                                <td>MSW = SSW/(N-k)</td>
                            </tr>
                            <tr>
                                <td><strong>Total</strong></td>
                                <td>SST</td>
                                <td>N - 1</td>
                                <td>-</td>
                                <td>-</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>üéØ Estad√≠stico de Prueba</h3>
                    <div class="formula-box">
                        <h4>Estad√≠stico F:</h4>
                        <p>\\[F = \\frac{MSB}{MSW} = \\frac{SSB/(k-1)}{SSW/(N-k)}\\]</p>
                        <p><strong>Distribuci√≥n bajo \\(H_0\\):</strong> \\(F \\sim F_{k-1, N-k}\\)</p>
                        <p><strong>Decisi√≥n:</strong> Rechazar \\(H_0\\) si \\(F_{calc} > F_{\\alpha, k-1, N-k}\\) o si valor-p < \\(\\alpha\\)</p>
                    </div>
                    
                    <h3>‚öñÔ∏è Dise√±o Balanceado vs No Balanceado</h3>
                    <div class="grid-2">
                        <div class="r-box">
                            <h4><span class="badge-balanced">Balanceado</span></h4>
                            <p><strong>Definici√≥n:</strong> Todos los grupos tienen el mismo tama√±o muestral</p>
                            <p>\\[n_1 = n_2 = ... = n_k = n\\]</p>
                            <p><strong>Ventajas:</strong></p>
                            <ul>
                                <li>M√°ximo poder estad√≠stico</li>
                                <li>M√°s robusto ante violaciones de supuestos</li>
                                <li>C√°lculos m√°s simples</li>
                                <li>Interpretaci√≥n m√°s clara</li>
                            </ul>
                        </div>
                        
                        <div class="python-box">
                            <h4><span class="badge-unbalanced">No Balanceado</span></h4>
                            <p><strong>Definici√≥n:</strong> Los grupos tienen diferentes tama√±os muestrales</p>
                            <p>\\[n_1 \\neq n_2 \\neq ... \\neq n_k\\]</p>
                            <p><strong>Consideraciones:</strong></p>
                            <ul>
                                <li>Menor poder estad√≠stico</li>
                                <li>M√°s sensible a violaciones de supuestos</li>
                                <li>Requiere ponderaci√≥n en c√°lculos</li>
                                <li>Com√∫n en datos observacionales</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3>‚úÖ Supuestos de ANOVA</h3>
                    <div class="example-box">
                        <ol>
                            <li><strong>Independencia:</strong> Las observaciones son independientes entre s√≠</li>
                            <li><strong>Normalidad:</strong> Los datos en cada grupo siguen distribuci√≥n normal</li>
                            <li><strong>Homocedasticidad:</strong> Las varianzas son iguales en todos los grupos (\\(\\sigma_1^2 = \\sigma_2^2 = ... = \\sigma_k^2\\))</li>
                        </ol>
                        <p><strong>Verificaci√≥n:</strong></p>
                        <ul>
                            <li><em>Normalidad:</em> Shapiro-Wilk test, Q-Q plots</li>
                            <li><em>Homocedasticidad:</em> Levene's test, Bartlett's test</li>
                        </ul>
                    </div>
                    
                    <h3>üìà Coeficiente de Determinaci√≥n</h3>
                    <div class="formula-box">
                        <p>\\[R^2 = \\frac{SSB}{SST} = 1 - \\frac{SSW}{SST}\\]</p>
                        <p><strong>Interpretaci√≥n:</strong> Proporci√≥n de la variabilidad total explicada por los grupos</p>
                        <p>Valores: 0 ‚â§ R¬≤ ‚â§ 1</p>
                        <ul>
                            <li>R¬≤ = 0: Los grupos no explican nada de la variabilidad</li>
                            <li>R¬≤ = 1: Los grupos explican toda la variabilidad</li>
                        </ul>
                    </div>
                </div>
            `;
        }
        
    </script>
</body>
</html>
